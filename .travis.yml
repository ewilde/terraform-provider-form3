language: go
go:
- 1.14.x
script:
- go run scripts/travis-wait.go make
after_success:
- make release
env:
  global:
  - FORM3_HOST=api.whistle.env.staging-form3.tech
  - secure: CZFXR1YNhtD5HtKni5EPkAkiI6DxoyUUtPLp0Q++L+NHvY1WiEsYsD+V3vMIMtBkLkJw4sQfiMSpu+eHA9LsbJ4UzoH+P1dT8iH0t0nkggFpa7Xhi+Niw/UN2MfpbWnT2/yFLwFYB41QL6zy7bjy8RNDQkgPKC+EHT9Qv3x5jj9hoDq0U7+LOfrh53Qd2GSWIeAuRDY65phtr4yEOEmHoWeTpZ17e4smXpnRZrMu/wRwywXGlxdsxgWp9Pa16OkaEF25Ytby8sjEMtZP6J5HLdXwxBs+6oEfe0naLcFGoLqkv9l15EMzo9D1M5p4dPVB/x+QWUs5/u8A/S6+YUEffpmZfA8DnE/9rbs78+OTudDMCDRu1PcvKOl5P8K0re3a4rxeFowUxL9pJhDBxDH75ODxDfxUd1MC+F62o850HOb9JqUFYz+h6e4GAHvu4xJLi71Yy59TgsIs9QktpbAXSNstvzLcbbzoLVKHc8BXU/t56g7D+50pmyCpcfz5vsHCkkJeB7c2sK9pQ1YHNBY+ciwS/X2vYOIXVw6dsxfba7xXctv0ooAzjYhdOBHGmYng3OZ6fQ1HnDAjFtIwoACUtT+RjzMxnhkGjvYlgnHXs8wZTDCPoEytlDTC7/NuYYoTvhALzrxBlR0QUqiYi0598lyC49DKkmeAF/p//V66dJA=
  - secure: qVIf5m/L8z28jhLR4Xx0uJzgnFcm8ETQubJXx2oru63R9rXLZAKfw9wblajmUAL2a8Kvh+SlLsM0ucZKhyC0pXieVrRpqIKSrV72UjAESvx6+nZuTwhT4z1YsR0hctXq2+ep2N1ho7O/Iiq5tKCfNIG8IKaMGGBJw7kVWWjXVe9cK9Tkij0kRodIu8max+k+Jy+nSyjvQZXRS0jVdDlsG0E4vGK9F9iXkc2ZmZ+QeUbeOsbXCHGdBZ33v5GKLARL6dowwIT1n2ODvExGI6oYekVTEhHsa4ik9CJjvEtI+asnYYlfFU5MautlOJ9TSZQF2kbMXxeZucQKhSYhfa7Yw533l+gx1oMUV4N2dw8E8/8W5EAkCY/kH94479zy2PbUQG1yYWyae3uOcN1ROmuttdxqBDLF1fzX/bdCIEcKBhA+XzrtARzaIGzYc9HG64z6l+vtMzPJq+zPmu+v8lwoh5gHHb/gxDEDC2bWNq6/wI2TydmpQVW6xVURlYM1EH9foz35+HmQIKceGiDo+lvq/p9hW0KzxF44noAW0MWZVUGz6NpwYYmPqEcjeXWpUUrTFlaa+kFdp9aKevcC1sQdUincIgPwAZijmLsIkbFP4rK1TNyXEMROxcs+XJk7khXWyH9HBE93irJAzLWnzkL1SpWIZvye0BwlGaAJXHnolx8=
  - secure: x1lejvjTYPaTa4WK+duq2C38qm0KRN5WIDqms1AafCz07jJrp5JwusXSz1KvSaqCpqRu81Md2MGhyljHIReM6ATP4n/5iRDkdIJQLz2XoEH2TKKpmtPVLKppX8+u/At5ByeJlHrCNcY7xP92I7t8h5h7Irqr8n1BYMRHlIF2qg7QpECTiJ2xhiQWT/bGTJjvLKkUx6QdJn+fRsGU02is013zAfmXuACCkspmG+IIFZ8e1fTy6ypys1gEeYtK6aAhJJodWRIHlDnGwhQqnKzfuXUbc1iPRChM3jfHGI6PT4iW1dfQuloKmvdsl3zOy8hX8gYK1muDV0i6tH8UoAW/97jyFrbhghx/Jl1hdvdPVGoz1ALiZMbj0K5U8OKlr741HKb++Rk33jeB3RbbBK41UCvB/0fSfQIhkoGDMIoWwcBUPZP4a+00Dnn9smlvM/Q3jdza04gjOsdKrtnGZnbc/Zj2f92Y0NIwuTTXKq8krnua9k55EtilpIX8ifgzgsg7AgQptc+JK3CBbiaXTxC+qPo6nm+TGQ2Na2fCGMe5gQets84knN5cOoJwJKU8DtAme/0t1mKGApGkSFvgv3ZmAlNAiaGfWSZaF2yHdbL8Rr8OXSfxrkL1jY8zUETCCIbkyEDZWR7RYfaWvomrYzsmKEQIiP4/Ix4TKAFjdiAUqjE=
  - secure: xg8LIrJgp/HjGsbWC0oViRQCYyqcA1XLsm2szHS1dLXPQbgMs4zCo7uF7yYebhGpxXZzdLv5omizLpUtRnaphz/f1PpCfqMQ92PB9IBBu6J0uPhykNVvmrI4bk2xu4bgvKLfA3oQqUJ657jcE6uB2WHbtAef21ryIJhrSG4KVKQuXl3MqLGnwAdnmNsiQ1jEu+e/872a5A2vkuyz8vJDkj+p9eW5IkRRqD0KpD0Cl1tQI7PUR8IjxCtvtDb8whM6q1qD60q8mqKZIqzoRZdLBSTas0AENkkhxpiBj09oAddQvPZ3wrMz4bBTG7Y5KmJDj52IUpjPK62mhvtJaSj+KDUIebvLTK+u+iZ1EZLS9ovdwIT5HSdtz5SP8nj4aGpaAXa59vutjeF/IJmRg6hiNbOmiOiuw6JuHPJydxexF9avHAEUXX0frBvAcHdJAhJj4bGseQlUaYrgBNeZj3IB2SU4JbOxGpNyd52az83ioIi1wCa7wcXUVheo/kT6PWXhlzE6H3uoJtvBccG2t4qnq9ZPiKp++AZ07L0JfPzgjORNyx6ZFRx9cXbfVGPGk4P6edP2Cd2Vm/y8xNY1kQC9BQ6FHPe6Q7SpkVjeGke1A3U6w7QBfMW2/qtjLHh01Ifo0IzAHasw3U98/qvfKsBFcjAUv4qGFdUCB1WbjHn0A5A=
  - secure: oTMGJ2wFJ1/1bdrxDIKJ+7PcxMOxOtDgpxzAW4pSkKw5Jfj4lmGvhUmFLJbota/00TGB/h7i79wbv6uuRcmQYBfKBe9Wa+rqzYNhRJh+UKU3fZtUwByW4rjYbeCA4vJX1q5533oj21agAKgXkrtuqUxzuJdIA5C3if+lQMJWpK6Vh666PQz787gTTe1tXVMQsb4cKNtbwgYoP4Z8+9XAhhBjyTFHZ4Tjd2m4hy5j25IoKgW/+ZdepWc5LMv67Af9gNOLVuV9+S5UPAnokXztzyCRJxTi+VMXOhfbzE+0Lknook2cS0akmaAxp1RcUTEu9jl2wb8AwaFgLbKmrNxvS/GZTNY+3qsAJwMpOQIg9eXvURg3gMz0xfWwHnAx99T7euopVLRzCId3X9/g6Jgb0TZj2x3lahTH+QckVGoOSDHFv8Y+uMtN+gGlKTKcwJfyhUoO3upgavOUaw0I3NNNRt13cCyd/NVo+z6YUS92ksSvhAA8YGqJRroMmK9ZURKkGgBrRn/+SPgaNZKO4BvGgCMPRcR5lv2iLSg5VmiG6X7lS8tXDLKqHFGcdsUD19GXxoCkmR+9/MiYQNsKKUK2SMg5aeO9hPI1iZ2iEVFtkqc69kEwLTgIJeMVkSGiZ6IZy/zyGhxO8KSavEPByee1X3ZoDNDSSfv5EHS18d4m6Ww=
  - secure: c67jDGpKdyg8tecUD/XBEpo4rTlnREPm3cNIiWqRUvvl7aNkCJGfSaaugmvULENZ7FIlu+4ee+hWmdYf7df7qWWL2G0vjPyI9/1mXZya54Mrae6iaC5gQv5r4E7qo6+sRhbxANBDDndqXua486qZmpuNiGavxdK1gVee26/VdA2FCEjhDAwMoLCCTThzm/yRz2InwVGwbxfjcndjTmqPz+rArhJTlJnszfnk1F13iQ9JejTxyOQ6brwxYfDZ1S9tF+I1AV0O/90Hs49yF2Akc6zxRd9Z2SbMC33qr3fAmTUdp+lMbatNXijlktiGR2ZWm08RM3gIsHRaVu19GMLbYqNiLePF8CJSPKsAlUeJ0WsWCAb0F4jATp14iBc2MFy3315geO0axqbLJwffXV6QqMNRClPsgIvuQAJkqXlFt3OrDZhT7eM5Zhd5pkUH8EULmEZxOfDSq85aU9kxiDspCENUUXitB8QFRIH3u72WREO0N95jV3IjjGsdRfJ3K30TB1tYTgCioBgSUDogZicz2AesmRiyqlouKn/Lc0sGkKIZ4/y7CW2KO1/NOdgmwmWyV6EM9o1OGG4SCYAhG8XFFrZBEywzbaHb3Rfu3e6reSXXJl2bmOLpClhMKFdkgpkWBad2GNMhs777r2khQ0eo5Bumn5J472Nt4JkMiZH8N8k=
  - secure: naA9F4PWTBFjBsueQ+lfXGO79k7AnL4ibO0li6B5aDJODe66AhKI5g4LbMwGSQ/Qtkhtule6DVi1uzLD4amNL8e6kwEWi9nD/pHEq1U8wmZXaKyLBH+0ZPtC9pSQ/tuNKaUr/rByChFGROmZVWDfNyA1O1tDX8FSqL4DnoWb1wPf8+FN7UtPymfNU5RWPpJsj31Dtd1A6Ua5XWE25nC8DdqMoSpw1p5k4j8oYCCktcBgvCScMffJo+9TQQN0tcLkEu+ee/JFcEWRvLRdvkfLexmvIBiEvGMhRB7qr0fCF5QnFURH3MePj1mVAKlm1Je5ui7m1xxNI4bFqkNApci1JNH7M5zZ7/ywjGotT6v0fdfTm4/vpJRDFnBjZDoxMHRr50ZvaIHXdN1fpO3XQsDC33TCOVxxMf3SRlaC11OXaxWC3ytURyDftJ+diTEu/NhqqYwQlvBKJ17h4Uah1nG0+mZqGp82SNbQDWuHwjIt9waVh7NnkAzsrHlGd1NN0K3GbHAbyqwgi+Ah+/EjFm5MCDHH7My7uvqYgk2OYa+lEq9GX4Cva+P7EcvgBEDFqHuoHi4vkhY3QYR+2mAdOG7ZBMj8qeX06B5KeKZ4RZw9VILXpk5MVhE+J05yB8fOF/k4/R5j7cPpsf0JTtYhEa9o0aHZgP7yDm20675P6d/nWME=
notifications:
  slack:
  - rooms:
    - secure: 0MnI4+fQ6qFhYAHErPHUgxFLHjqUBpk5YgoK/Pr3/GDW6F0q6HY3TkDDis4Pz0s2V+ExbLfYn4ORIBz8HtgkkPyH28b8/AlXN8gzA7fcRv6ElWLrmLbqfvQdaIIChQ3r675z1da+FxGmpgWIKqKnDmwMEgHEZiY58IMBJT49dBbBYqIkKmxoWf7rwXWcFReiKPGxb+aySa+QCR4Q8t0XNSQ+065oTfhMD/i6JJn1/Nrh+elvfZnGCmdzMAhg8JngGg9J0vTxtdZuNBBAziJhnQBua5i37SQ3wMqB2s8ICb+fS9hmvcKarRi7mx63oFTI/taBR2a71avV6ks6G/8utPclcIW44XhuO2xzNA2HCgSHH4cOBKWAAmp0GRFNUAGzOSgUUBNwSWcAHGlgbmz/DDzIqgF0gPd1p7fKLCLj9AesBiR0WB4BOsbYh0EdaDfEoS7EU74Ab2OPImYE29UrCaSHPJuAGdyZ9r8ynrvaieNAyo9Q6z8tzJ7KG4rRg4ZWjtXbGZK8z/WhYQ6JCeRdiERdfPbzGYV+cJskKVfAi8WwTU8QR117Fg1U9al9A9j2RrUt9VBio4rqcneYovFo9H3DUY7SzPE+gxyS0Yeh/pOxHihf7MKAvjicTi2KtaNvFBasJVxiPkWdkSbwjE3ScthPJnySzpDOBmMgEijW9Tk=
  - rooms:
    - secure: dxkebBJithsGYa1WsAjRxmj7aIZCelQ3sRsxqXxxURgv0UqqR4g+bW22/1aJUuSLZT02svay+irjgpwo7rbZR5VKZt5JUuG//GEGkavn0teg8RZPdRFAyq9z7hWYUyGKnQWv8qoBqVEgbI1l4Nzpoxd+qDWQrM+3VDDmcQ7CnciFfhCatHCan7+XJuLVjyh4relJYiFtGM3b9EVLVJOso++jQp5fndy5fJXZPgv4mxhlQareLPa6N147hoUH0XTrVSSatITg+cySHojGjj2SWt6o+gRNpKPiYZtBQWwZPPeF8YjSfhxM8m0h2eM71/UUSbH2hFWGlascmnLesGLl0Krv8ijXec/p/0v7dX0oieVW0UGH0qpvDNxPC+AwBCHo1cyczzwyFiuZEijC/N6w90ivU3qfNXyx7cWKfivVKsIBvMTC4cJRmwElhGLR1WLGlVQaON/d39nn88T59OS7mvlIx8sdWi4nwjyP6zcv1do765BkoJRPEHvWQCnXWgRvLsaiCJqGd/RRqvfJUXDxErtFTzEGBDzxzzhJYUTXsZ1sJaJ/I9aRVdf7Juf9hbGw9Mt445D06jYy43XXGXSUTAPxZ/VUeI4ssqFUQ7K+Ag0QH/1HlT2RMZT2dEwG2j81haNyLSu9oY59a1rd2FR9FbTUdzlW63lv1Jk06jYlisI=
    if: branch = master
    on_success: never
    on_failure: always
    on_pull_requests: false
    template:
    - ":scream: FAILED BUILD"
    - "*%{repository_slug}* on *%{branch}*"
    - ":gottarun: and make it :raggreen:"
    - 'Build details: %{build_url}'
